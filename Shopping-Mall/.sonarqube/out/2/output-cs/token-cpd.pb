×
RD:\training\FinalAssignment\Shopping-Mall\Shopping-Mall WebApi\api\ModelApiMall.cs
	namespace 	 
Shopping_Mall_WebApi
 
. 
api "
{ 
public 

class 
ModelApiMall 
{ 
[ 	
Key	 
] 
public		 
int		 
Id		 
{		 
get		 
;		 
set		  
;		  !
}		" #
[

 	
	MaxLength

	 
(

 
$num

 
,

 
ErrorMessage

 #
=

$ %
$str

& Q
)

Q R
]

R S
public 
string 
? 
Name 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
[ 	
	MaxLength	 
( 
$num 
, 
ErrorMessage #
=$ %
$str& Q
)Q R
]R S
public 
string 
? 
City 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
[ 	
	MaxLength	 
( 
$num 
, 
ErrorMessage #
=$ %
$str& Q
)Q R
]R S
public 
string 
? 
State 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
Required	 
] 
public 
int 
? 
Year 
{ 
get 
; 
set  #
;# $
}% &
[ 	
Display	 
( 
Name 
= 
$str 
)  
]  !
public 
string 
? 
Mallimg 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} —
TD:\training\FinalAssignment\Shopping-Mall\Shopping-Mall WebApi\Automap\AutoMapper.cs
	namespace 	 
Shopping_Mall_WebApi
 
. 
Automap &
{ 
public 

class 

AutoMapper 
: 
Profile $
{ 
public		 

AutoMapper		 
(		 
)		 
{

 	
	CreateMap 
< 
Malls 
, 
ModelApiMall )
>) *
(* +
)+ ,
., -

ReverseMap- 7
(7 8
)8 9
;9 :
} 	
} 
} ô:
\D:\training\FinalAssignment\Shopping-Mall\Shopping-Mall WebApi\Controllers\MallController.cs
	namespace

 	 
Shopping_Mall_WebApi


 
.

 
Controllers

 *
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
MallController 
:  !
ControllerBase" 0
{ 
private 
readonly 
MallContext $
_context% -
;- .
private 
readonly 
IMapper  
_mapper! (
;( )
private 
IDataRepository 
<  
Malls  %
>% &
@object' .
;. /
public 
MallController 
( 
MallContext )
context* 1
,1 2
IMapper3 :
mapper; A
)A B
{ 	
_context 
= 
context 
; 
_mapper 
= 
mapper 
; 
} 	
public 
MallController 
( 
IDataRepository -
<- .
Malls. 3
>3 4
@object5 <
)< =
{ 	
this 
. 
@object 
= 
@object "
;" #
} 	
[ 	
HttpPost	 
] 
public   
async   
Task   
<   
ActionResult   &
<  & '
Malls  ' ,
>  , -
>  - .
Add  / 2
(  2 3
ModelApiMall  3 ?
modelApi  @ H
)  H I
{!! 	
var"" 
books"" 
="" 
_mapper"" 
.""  
Map""  #
<""# $
Malls""$ )
>"") *
(""* +
modelApi""+ 3
)""3 4
;""4 5
_context## 
.## 
Mall## 
.## 
Add## 
(## 
books## #
)### $
;##$ %
await$$ 
_context$$ 
.$$ 
SaveChangesAsync$$ +
($$+ ,
)$$, -
;$$- .
return%% 
Ok%% 
(%% 
_context%% 
.%% 
Mall%% #
)%%# $
;%%$ %
}&& 	
['' 	
HttpGet''	 
]'' 
public(( 
async(( 
Task(( 
<(( 
IActionResult(( '
>((' (
List(() -
(((- .
)((. /
{)) 	
if** 
(** 
_context** 
.** 
Mall** 
==**  
null**! %
)**% &
{++ 
return,, 
	NoContent,,  
(,,  !
),,! "
;,," #
}-- 
var.. 
	Mall_List.. 
=.. 
await.. !
_context.." *
...* +
Mall..+ /
.../ 0
ToListAsync..0 ;
(..; <
)..< =
;..= >
return// 
Ok// 
(// 
	Mall_List// 
)//  
;//  !
}00 	
[11 	
HttpPut11	 
]11 
public22 
IActionResult22 
Update22 #
(22# $
int22$ '
id22( *
,22* +
Malls22, 1
malls222 7
)227 8
{33 	
if44 
(44 
malls44 
==44 
null44 
)44 
{55 
return66 

BadRequest66 !
(66! "
$str66" =
)66= >
;66> ?
}77 
if88 
(88 
_context88 
==88 
null88  
)88  !
{99 
return:: 
NotFound:: 
(::  
$str::  6
)::6 7
;::7 8
};; 
var<< 
Update<< 
=<< 
_context<< !
.<<! "
Mall<<" &
.<<& '
Where<<' ,
(<<, -
e<<- .
=><</ 1
e<<2 3
.<<3 4
Id<<4 6
==<<7 9
id<<: <
)<<< =
.<<= >
FirstOrDefault<<> L
(<<L M
)<<M N
;<<N O
if== 
(== 
Update== 
==== 
null== 
)== 
{>> 
return?? 
NotFound?? 
(??  
$str??  D
)??D E
;??E F
}@@ 
_contextAA 
.AA 
MallAA 
.AA 
RemoveAA  
(AA  !
UpdateAA! '
)AA' (
;AA( )
UpdateBB 
.BB 
NameBB 
=BB 
mallsBB 
.BB  
NameBB  $
;BB$ %
UpdateCC 
.CC 
CityCC 
=CC 
mallsCC 
.CC  
CityCC  $
;CC$ %
UpdateDD 
.DD 
StateDD 
=DD 
mallsDD  
.DD  !
StateDD! &
;DD& '
UpdateEE 
.EE 
YearEE 
=EE 
mallsEE 
.EE  
YearEE  $
;EE$ %
UpdateFF 
.FF 
MallimgFF 
=FF 
mallsFF "
.FF" #
MallimgFF# *
;FF* +
_contextHH 
.HH 
MallHH 
.HH 
UpdateHH  
(HH  !
UpdateHH! '
)HH' (
;HH( )
_contextII 
.II 
SaveChangesII  
(II  !
)II! "
;II" #
returnKK 
OkKK 
(KK 
_contextKK 
.KK 
MallKK #
)KK# $
;KK$ %
}LL 	
[MM 	

HttpDeleteMM	 
(MM 
$strMM 
)MM 
]MM 
publicNN 
asyncNN 
TaskNN 
<NN 
ActionResultNN &
>NN& '

DeletebyIdNN( 2
(NN2 3
intNN3 6
idNN7 9
)NN9 :
{OO 	
ifPP 
(PP 
idPP 
==PP 
nullPP 
)PP 
{QQ 
returnRR 

BadRequestRR !
(RR! "
)RR" #
;RR# $
}SS 
ifTT 
(TT 
_contextTT 
.TT 
MallTT 
==TT  
nullTT! %
)TT% &
{UU 
returnVV 
	NoContentVV  
(VV  !
)VV! "
;VV" #
}WW 
varXX 
mallXX 
=XX 
awaitXX 
_contextXX %
.XX% &
MallXX& *
.XX* +
	FindAsyncXX+ 4
(XX4 5
idXX5 7
)XX7 8
;XX8 9
ifYY 
(YY 
mallYY 
==YY 
nullYY 
)YY 
{ZZ 
return[[ 
NotFound[[ 
([[  
)[[  !
;[[! "
}\\ 
_context]] 
.]] 
Mall]] 
.]] 
Remove]]  
(]]  !
mall]]! %
)]]% &
;]]& '
await^^ 
_context^^ 
.^^ 
SaveChangesAsync^^ +
(^^+ ,
)^^, -
;^^- .
return__ 
Ok__ 
(__ 
_context__ 
.__ 
Mall__ #
)__# $
;__$ %
}`` 	
}bb 
}cc ²
ID:\training\FinalAssignment\Shopping-Mall\Shopping-Mall WebApi\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddDbContext 
< 
MallContext )
>) *
(* +
options+ 2
=>3 5
options 
. 
UseSqlServer 
( 
builder 
. 
Configuration *
.* +
GetConnectionString+ >
(> ?
$str? K
)K L
)L M
)M N
;N O
builder

 
.

 
Services

 
.

 
AddControllers

 
(

  
)

  !
;

! "
builder 
. 
Services 
. 
AddAutoMapper 
( 
typeof %
(% &
Program& -
)- .
). /
;/ 0
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
UseHttpsRedirection 
( 
) 
; 
app 
. 
UseAuthorization 
( 
) 
; 
app 
. 
MapControllers 
( 
) 
; 
app   
.   
Run   
(   
)   	
;  	 
Í
\D:\training\FinalAssignment\Shopping-Mall\Shopping-Mall WebApi\Repository\IDataRepository.cs
	namespace 	%
Shopping_MAll_TestProject
 #
{ 
public 

	interface 
IDataRepository $
<$ %
TEntity% ,
>, -
{ 
IEnumerable 
< 
TEntity 
> 
List !
(! "
)" #
;# $
void		 
Add		 
(		 
Malls		 
mall		 
)		 
;		 
}

 
} 